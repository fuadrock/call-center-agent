<ngx-spinner bdColor="rgba(0, 0, 0, 0.8)" size="medium" color="#fff" type="pacman" [fullScreen]="true">
    <p style="color: white"> Loading... </p>
</ngx-spinner>

<div class="row">
    <div class="col-12">
        <div class="page-title-box d-flex align-items-center justify-content-between">
            <h4 class="mb-0">Wallboard</h4>
        </div>
    </div>
</div>


<div class="d-xl-flex">
    <div class="w-100">
        <div class="d-md-flex">
            <div class="card filemanager-sidebar me-md-3">
                <div class="card-body">

                    <div class="d-flex flex-column h-100">
                        <div class="mb-4">
                            <ul class="list-unstyled categories-list">

                                <li class="card border shadow-none mb-2">
                                    <a href="javascript: void(0);" class="text-body d-flex align-items-center">
                                        <i class="fas fa-spinner font-size-13 me-2"></i> <span class="me-auto">All
                                            Queues</span>
                                    </a>
                                </li>

                                <li *ngFor="let que of queues " class="card border shadow-none mb-2 bg-light">
                                    <a href="javascript: void(0);" (click)="changeQueue(que)"
                                        class="text-body d-flex align-items-center">
                                        <i class="fas fa-spinner font-size-13 me-2"></i> <span
                                            class="me-auto">{{que?.alias}} - {{que?.extension}}</span>
                                    </a>
                                </li>

                              

                            </ul>
                        </div>


                    </div>
                </div><!-- end cardbody-->
            </div><!-- end card -->
            <!-- filemanager-leftsidebar -->

            <div class="w-100">
                <div class="card">
                    <div class="card-body">


                        <div>
                            <div class="row">
                                <div class="col-xl-6 col-sm-6">
                                    <div class="card shadow-none bg-primary border">
                                        <div class="card-body p-3">
                                            <div>

                                                <div class="avatar-sm me-3 mb-3">
                                                    <div class="avatar-title bg-transparent rounded">
                                                        <i class="fas fa-spinner  font-size-24 text-white me-2"></i>
                                                    </div>

                                                </div>
                                                <div>
                                                    <h5 class="font-size-24  text-white">{{activeQueue?.extension}} -
                                                        {{activeQueue?.alias}} <a href="javascript: void(0);"
                                                            class="text-light"> Dashboard</a> </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->

                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert alert-info">
                                            <div>
                                                <div class="mb-3 font-size-24  text-primary text-center">
                                                    <i class=" font-size-24  fas fa-phone-alt  text-info "></i>
                                                    50
                                                </div>
                                                <div>
                                                    <h5 class="font-size-24  text-primary text-center"> Total Calls
                                                    </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->

                                <div class="col-xl-3 col-sm-6">
                                    <div class="card shadow-none bg-light border">
                                        <div class="card-body p-3">
                                            <div>

                                                <div>
                                                    <h5 class="font-size-24  text-primary text-center"> 01-24-2023 </h5>

                                                </div>
                                                <div class="mb-3 font-size-24  text-primary text-center">
                                                    <i class="fas fa-clock  font-size-24 text-primary "></i>
                                                    12:00 AM
                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->



                            </div><!-- end row -->
                        </div>

                        <div class="mt-4">


                            <div class="row">
                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert bg-success">
                                            <div>
                                                <div class="mb-3 font-size-24 font-weight-bold text-white text-center"
                                                    style="font-size:30px">
                                                    {{liveData?.waiting}}
                                                </div>
                                                <div>
                                                    <h5 class="font-size-20  text-white text-center"> WAITING </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->
                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert bg-success">
                                            <div>
                                                <div class="mb-3 font-size-24 font-weight-bold text-white text-center"
                                                    style="font-size:30px">
                                                    {{queueData?.duration}}
                                                </div>
                                                <div>
                                                    <h5 class="font-size-20  text-white text-center"> TALKTIME </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->
                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert bg-success">
                                            <div>
                                                <div class="mb-3 font-size-24 font-weight-bold text-white text-center"
                                                    style="font-size:30px">
                                                    {{callType?.answered}}
                                                </div>
                                                <div>
                                                    <h5 class="font-size-20  text-white text-center"> ANSWERED </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->
                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert bg-danger">
                                            <div>
                                                <div class="mb-3 font-size-24 font-weight-bold text-white text-center"
                                                    style="font-size:30px">
                                                    {{callType?.abandoned}}
                                                </div>
                                                <div>
                                                    <h5 class="font-size-20  text-white text-center"> ABANDONED </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->
                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert bg-success">
                                            <div>
                                                <div class="mb-3 font-size-24 font-weight-bold text-white text-center"
                                                    style="font-size:30px">
                                                    {{liveData?.busy}}
                                                </div>
                                                <div>
                                                    <h5 class="font-size-20  text-white text-center"> AGENTS BUSY </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->
                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert bg-success">
                                            <div>
                                                <div class="mb-3 font-size-24 font-weight-bold text-white text-center"
                                                    style="font-size:30px">
                                                    {{liveData?.logged_in}}
                                                </div>
                                                <div>
                                                    <h5 class="font-size-20  text-white text-center"> LOGGED IN </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->
                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert bg-warning">
                                            <div>
                                                <div class="mb-3 font-size-24 font-weight-bold text-white text-center"
                                                    style="font-size:30px">
                                                    {{callType?.missed}}
                                                </div>
                                                <div>
                                                    <h5 class="font-size-20  text-white text-center"> MISSED </h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->
                                <div class="col-xl-3 col-sm-6">
                                    <div class=" ">
                                        <div class="card-body p-3 alert bg-danger">
                                            <div>
                                                <div class="mb-3 font-size-24 font-weight-bold text-white text-center"
                                                    style="font-size:30px">
                                                    {{queueData?.waitTime}}
                                                </div>
                                                <div>
                                                    <h5 class="font-size-20  text-white text-center"> WAITING TIME</h5>

                                                </div>
                                            </div>
                                        </div><!-- end card body -->
                                    </div><!-- end card -->
                                </div><!-- end col -->





                            </div><!-- end row -->
                        </div>

                        <div class="mt-4">
                            <mat-tab-group >
                                <mat-tab label="Call Status">
                                    <table mat-table [dataSource]="caller_status" class="mat-elevation-z8">

                                   
                                      
                                        <ng-container matColumnDef="agent">
                                          <th mat-header-cell *matHeaderCellDef> Agent </th>
                                          <td mat-cell *matCellDef="let element"> {{element.agent}} [{{element.extension}}] </td>
                                        </ng-container>
                                      
                                       
                                        <ng-container matColumnDef="status">
                                          <th mat-header-cell *matHeaderCellDef> Status </th>
                                          <td mat-cell *matCellDef="let element"> {{element.status}} </td>
                                        </ng-container>
                                      
                                        <ng-container matColumnDef="state">
                                          <th mat-header-cell *matHeaderCellDef> State </th>
                                          <td mat-cell *matCellDef="let element"> {{element.state}} </td>
                                        </ng-container>
                                      
                                        <ng-container matColumnDef="missed">
                                          <th mat-header-cell *matHeaderCellDef> Missed </th>
                                          <td mat-cell *matCellDef="let element"> {{element.missed}} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="answered">
                                            <th mat-header-cell *matHeaderCellDef> Answered </th>
                                            <td mat-cell *matCellDef="let element"> {{element.answered}} </td>
                                          </ng-container>

                                          <ng-container matColumnDef="caller">
                                            <th mat-header-cell *matHeaderCellDef> Caller </th>
                                            <td mat-cell *matCellDef="let element"> {{element.caller}} </td>
                                          </ng-container>

                                          <ng-container matColumnDef="duration">
                                            <th mat-header-cell *matHeaderCellDef> Duration </th>
                                            <td mat-cell *matCellDef="let element"> {{element.duration}} </td>
                                          </ng-container>
                                      
                                        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                      </table>
                                </mat-tab>
                                <mat-tab label="Call History">
                                    <table mat-table [dataSource]="slicedCalls" class="mat-elevation-z8">

                                        <ng-container matColumnDef="agent">
                                          <th mat-header-cell *matHeaderCellDef>Caller No</th>
                                          <td mat-cell *matCellDef="let element"> {{element.caller_id_name}} [{{element.caller_id_number}}] </td>
                                        </ng-container>
                                      
                                   
                                        <ng-container matColumnDef="destination">
                                          <th mat-header-cell *matHeaderCellDef>Caller Destination</th>
                                          <td mat-cell *matCellDef="let element"> {{element.caller_destination}} </td>
                                        </ng-container>
                                      
                                       
                                        <ng-container matColumnDef="final">
                                          <th mat-header-cell *matHeaderCellDef>Final Destination</th>
                                          <td mat-cell *matCellDef="let element"> {{element.caller_destination}} </td>
                                        </ng-container>
                                      
                                    
                                        <ng-container matColumnDef="start">
                                          <th mat-header-cell *matHeaderCellDef>Call Start Time</th>
                                          <td mat-cell *matCellDef="let element"> {{element.start_stamp}} </td>
                                        </ng-container>

                                        <ng-container matColumnDef="type">
                                            <th mat-header-cell *matHeaderCellDef>Call Type</th>
                                            <td mat-cell *matCellDef="let element"> {{element.type}} </td>
                                          </ng-container>

                                        <ng-container matColumnDef="duration">
                                            <th mat-header-cell *matHeaderCellDef>Duration</th>
                                            <td mat-cell *matCellDef="let element"> {{element.duration}} </td>
                                          </ng-container>
                                      
                                        <tr mat-header-row *matHeaderRowDef="displayedColumnHistory"></tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumnHistory;"></tr>
                                      </table>
                                </mat-tab>
                              
                              </mat-tab-group>
                              
                            <!-- <div class="d-flex flex-wrap  ">
                                <h5 class="font-size-14 me-3 text-primary">Call Status</h5>

                                <div class="ms-auto">
                                    <a href="javascript: void(0);" class="fw-medium text-reset"><i
                                            class="fas fa-history"></i> Call History</a>
                                </div>
                            </div>
                            <hr class="mt-2">

                            <div class="table-responsive" style="min-height:500px;">
                                <table class="table align-middle table-nowrap table-hover mb-0">
                                    <thead>
                                        <tr>
                                            <th scope="col">Caller</th>
                                            <th scope="col">Callee</th>
                                            <th scope="col">Duration</th>
                                            <th scope="col">Details</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let call of liveData?.calls; let i as index">

                                            <td>
                                                <div class="dropdown">
                                                    <a class="font-size-16 text-dark fw-medium dropdown-toggle"
                                                        role="button" data-bs-toggle="dropdown" aria-haspopup="true">
                                                        <i class="fas fa-phone-alt align-middle text-success me-2"></i>
                                                        {{call?.name}} [{{call?.extension}}] <i
                                                            class="uil uil-ellipsis-h"></i>
                                                    </a>
                                                    <div class="dropdown-menu dropdown-menu-end">
                                                        <a class="dropdown-item" href="#">Barge In</a>
                                                        <a class="dropdown-item" href="#">Listen</a>
                                                        <div class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href="#">Whisper to Shijohn Joseph
                                                            [104]</a>
                                                        <a class="dropdown-item" href="#">Transfer Selvambikai [103]</a>
                                                        <a class="dropdown-item" href="#">Park Thangaraj [101]</a>
                                                        <div class="dropdown-divider"></div>
                                                        <a class="dropdown-item" href="#">Drop</a>
                                                        <a class="dropdown-item" href="#">Record</a>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="text-dark fw-medium">{{call.served_by}} ({{call.caller_number}})</td>
                                            <td>{{call?.duration}}</td>
                                            <td>
                                                {{call?.call_status}}
                                            </td>
                                        </tr>
                                  
                                    </tbody>
                                </table>
                            </div> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card filemanager-sidebar ms-lg-3">
     
            <div class="p-2">
                <div class="text-center">
                    <h5 class="font-size-15 mb-4">Agent Status</h5> 
                </div>
                <div class="search-box ">
                    <div class="position-relative">
                        <input type="text" class="form-control rounded bg-light border-0" #peopleSearchInput placeholder="Search...">
                        <i class="mdi mdi-magnify search-icon"></i>
                    </div>
                </div>
            </div>

            <div class="chat-message-list" data-simplebar>
                <div class="p-3 pt-1">
                    <div>  
                        <ul class="list-unstyled chat-list">
                            <li class="active" *ngFor="let people of peoples">
                                <a [routerLink]="[]">
                                    <div class="d-flex align-items-start">
                                        
                                        <div class="flex-shrink-0 user-img st-available align-self-center me-3">
                                            <img src="assets/images/users/avatar-2.jpg" [ngClass]="people.status.a_class" class="rounded-circle avatar-sm" alt="">
                                            <span class="user-status"></span>
                                        </div>
                                        
                                        <div class="flex-grow-1 overflow-hidden">
                                            <h5 class="text-truncate font-size-14 mb-1">{{people?.extension}} - {{people?.name}}</h5>
                                            <p class="text-truncate mb-0 " [ngClass]="people.status.i_class"> {{people?.status.name}} <button type="button" class="btn btn-primary font-size-11 p-1"  (click)="addToQueue(people.uuid)" style="line-height: 10px;"><i class="uil uil-user-plus font-size-12"></i> Add</button></p>
                                        </div> 
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        
      
    </div><!-- end card -->
</div><!-- end row -->